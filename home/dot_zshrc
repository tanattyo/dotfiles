#!/usr/bin/env bash

# zshrc: Configuration for zsh shell

# Set shell options
setopt nonomatch

# --- PATH ---
# Add a directory to PATH if it's not already included
pathadd() {
  local dir="$1"
  [[ ":$PATH:" != *":$dir:"* ]] && export PATH="$dir:$PATH"
}
# macOS Homebrew
if [[ "$OSTYPE" == darwin* ]]; then
  eval "$(/opt/homebrew/bin/brew shellenv)"
fi

# Go
export GOENV_ROOT=$HOME/.goenv
pathadd "$HOME/.goenv/shims:$HOME/.goenv/bin:$PATH"
pathadd "$GOPATH/bin:$PATH"
eval "$(goenv init -)"

# Ruby
pathadd "$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)"

# others
pathadd "/Users/hayate-tanaka/.local/bin"

# try
eval "$(try init ~/src/tries)"

# neovim alias
alias vi="nvim"
alias vim="nvim"
alias view="nvim -R"

# History configuration
HISTSIZE=10000                 # 保存する履歴の数
SAVEHIST=10000                 # 保存する履歴のファイルサイズ
HISTFILE=~/.zsh_history        # 履歴ファイル
setopt hist_ignore_dups        # 重複コマンドを無視
setopt hist_reduce_blanks      # 無駄な空白を無視

# Oh-my-zsh other settings
export ZSH="$HOME/.local/share/sheldon/repos/github.com/ohmyzsh/ohmyzsh"

ENABLE_CORRECTION=true
CASE_SENSITIVE=true
HIST_STAMPS="yyyy-mm-dd"
COMPLETION_WAITING_DOTS=true

# Sheldon plugin manager
eval "$(sheldon source)"

export ABBR_USER_ABBREVIATIONS_FILE="$HOME/.config/zsh-abbr/user-abbreviations.sh"
export ABBR_AUTOLOAD=0
